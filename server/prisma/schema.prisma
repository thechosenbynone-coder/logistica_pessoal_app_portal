generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(uuid())
  registration  String    @unique
  name          String
  email         String    @unique
  role          String    @default("COLLABORATOR")
  jobTitle      String?   
  avatarUrl     String?
  
  documents     UserDocument[]
  deployments   Deployment[]
  timeSheets    TimeSheet[]
  expenses      Expense[]
  createdAt     DateTime  @default(now())
}

model Project {
  id          String       @id @default(uuid())
  name        String       
  deployments Deployment[]
}

model Deployment {
  id            String    @id @default(uuid())
  userId        String
  projectId     String?
  destination   String    
  embarkDate    DateTime
  disembarkDate DateTime?
  status        String    @default("SCHEDULED")
  
  user          User      @relation(fields: [userId], references: [id])
  project       Project?  @relation(fields: [projectId], references: [id])
}

model UserDocument {
  id          String    @id @default(uuid())
  userId      String
  name        String    
  issueDate   DateTime? // <--- ADICIONADO
  expiryDate  DateTime
  status      String    @default("VALID")
  fileUrl     String?
  
  user        User      @relation(fields: [userId], references: [id])
}

model Expense {
  id          String    @id @default(uuid())
  userId      String
  amount      Decimal
  status      String    @default("PENDING")
  description String?
  user        User      @relation(fields: [userId], references: [id])
}

model TimeSheet {
  id          String    @id @default(uuid())
  userId      String
  date        DateTime
  hours       Decimal
  user        User      @relation(fields: [userId], references: [id])
}
